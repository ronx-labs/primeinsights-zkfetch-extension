const g="modulepreload",c={},u="/",f=function(s,n){return!n||n.length===0?s():Promise.all(n.map(o=>{if(o=`${u}${o}`,o in c)return;c[o]=!0;const i=o.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${l}`))return;const r=document.createElement("link");if(r.rel=i?"stylesheet":g,i||(r.as="script",r.crossOrigin=""),r.href=o,document.head.appendChild(r),i)return new Promise((a,d)=>{r.addEventListener("load",a),r.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>s())},{ReclaimClient:m}=f(()=>import("./index.ba6f8707.js").then(function(e){return e.i}),[]);let t=!1;const h=new m("0xCAAf8a7d1e5285491f3032ad7Ac9A0FbbaA69072","0x37223098737363b2f37f522c22ab890db52c94b39f49111226cfa99cb6e7034c");console.log("Background script loaded.");chrome.storage.sync.get("isMonitoring",e=>{t=e.isMonitoring||!1,console.log("Initial isMonitoring state:",t)});chrome.runtime.onMessage.addListener((e,s,n)=>{console.log("Message received:",e),e.action==="toggleMonitoring"&&(t=e.isMonitoring,chrome.storage.sync.set({isMonitoring:t}),console.log("Monitoring toggled:",t),n({success:!0}))});chrome.webRequest.onHeadersReceived.addListener(e=>{if(console.log("Request details:",e),t&&e.url.includes("/download.html")&&e.statusCode===302){const s=e.responseHeaders.find(n=>n.name.toLowerCase()==="location").value;console.log("Redirect URL found:",s),t=!1,chrome.storage.sync.set({isMonitoring:t,redirectUrl:s}),console.log("Monitoring auto-disabled after capturing redirect."),chrome.action.setBadgeText({text:"1"}),chrome.action.setBadgeBackgroundColor({color:"#777777"}),console.log(h)}},{urls:["https://*.amazon.com/*","https://amazon.com/*"]},["responseHeaders"]);export{f as _};
